<app-layout>
  <div class="main-role-permission-container">
    <div class="role-permissions">
      <h1>Manage Permissions for {{ roleName }}</h1>
      <mat-list>
        <mat-list-item *ngFor="let permission of permissions" class="permission-item">
          <div class="permission-container">
            <!-- Permission Name -->
            <div class="permission-name">
              <span>{{ permission.name }}</span>
            </div>
  
            <!-- Toggles -->
            <div class="permission-toggles">
              <!-- Case 1: Separate toggles for installment and loan -->
              <div *ngIf="permission.value && permission.value.installment !== undefined && permission.value.loan !== undefined">
                <div class="toggle-item">
                  <span>Installment</span>
                  <!-- <mat-slide-toggle
                    [checked]="permission.value.installment === 1"
                    (change)="togglePermission(permission, 'installment')"
                  >
                  </mat-slide-toggle> -->
                  <mat-checkbox
                    [checked]="permission.value.installment === 1"
                    (change)="togglePermission(permission, 'installment')"
                  >
                  </mat-checkbox>
                </div>
                <div class="toggle-item">
                  <span>Loan</span>
                  <mat-checkbox
                    [checked]="permission.value.loan === 1"
                    (change)="togglePermission(permission, 'loan')"
                  >
                  </mat-checkbox>
                </div>
              </div>
  
              <!-- Case 2: Single toggle for numeric value -->
              <div *ngIf="permission.value === 1 || permission.value === 0 || permission.value === null">
                <mat-checkbox
                  [checked]="permission.value === 1"
                  (change)="togglePermission(permission)"
                >
                </mat-checkbox>
              </div>
            </div>
          </div>
        </mat-list-item>
      </mat-list>
      <button mat-flat-button class="Save permission" (click)="savePermissions()">Save</button>
    </div>
    <app-role-modules class="role-module"></app-role-modules>    
  </div>
</app-layout>